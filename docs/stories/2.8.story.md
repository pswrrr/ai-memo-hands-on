# Story 2.8: 빈 상태 UI 및 온보딩

## Status
Done

## Story
**As a** 신규 사용자,
**I want** 노트가 없을 때 명확한 안내와 행동 유도를 받도록,
**so that** 첫 노트를 쉽게 작성하고 서비스를 빠르게 이해할 수 있다

## Acceptance Criteria
1. 노트가 없는 경우 빈 상태 UI가 표시된다
2. 빈 상태 UI는 일러스트레이션 아이콘을 포함한다
3. 빈 상태 UI는 친근한 안내 메시지를 포함한다
4. "첫 노트 작성하기" CTA 버튼이 표시된다
5. CTA 버튼 클릭 시 노트 작성 페이지로 이동한다
6. 휴지통이 비어있을 때도 별도의 빈 상태 UI가 표시된다
7. 검색 결과가 없을 때도 빈 상태 UI가 표시된다
8. 빈 상태 UI는 반응형으로 모바일/데스크톱 모두 지원한다
9. 빈 상태 메시지는 상황별로 다르게 표시된다 (노트 없음/검색 결과 없음/휴지통 비어있음)
10. 애니메이션 효과가 적용되어 부드럽게 표시된다
11. 온보딩을 완료한 사용자에게는 간소화된 빈 상태 UI가 표시된다
12. 접근성(a11y) 가이드라인을 준수한다

## Tasks / Subtasks
- [x] EmptyState 공통 컴포넌트 구현 (AC: 1, 2, 3, 8, 10, 12)
  - [x] EmptyState 컴포넌트 생성
  - [x] 아이콘/이미지 영역 구현
  - [x] 메시지 영역 구현
  - [x] 반응형 레이아웃 스타일링
  - [x] 페이드인 애니메이션 적용
  - [x] ARIA 라벨 추가
- [x] 노트 목록 빈 상태 구현 (AC: 4, 5, 9, 11)
  - [x] NoteList 컴포넌트에 빈 상태 통합
  - [x] CTA 버튼 구현 및 라우팅
  - [x] 온보딩 완료 여부에 따른 메시지 분기
  - [x] 아이콘 및 메시지 커스터마이징
- [x] 휴지통 빈 상태 구현 (AC: 6, 9)
  - [x] TrashContent 컴포넌트에 빈 상태 통합
  - [x] 휴지통 전용 메시지 및 아이콘
- [ ] 검색 결과 빈 상태 구현 (AC: 7, 9) - Story 5.1에서 구현 예정
  - [ ] SearchResults 컴포넌트에 빈 상태 통합
  - [ ] 검색어 표시 및 재검색 제안
- [x] Lucide React 아이콘 선정 및 적용
  - [x] 노트 빈 상태: StickyNote
  - [x] 휴지통 빈 상태: Trash2
- [x] 테스트 구현 (AC: 1-12)
  - [x] EmptyState 컴포넌트 테스트
  - [x] 각 컨텍스트별 빈 상태 렌더링 테스트
  - [x] CTA 버튼 클릭 동작 테스트
  - [x] 접근성 테스트

## Dev Notes

### Relevant Source Tree Info
- `components/notes/EmptyState.tsx` - 빈 상태 공통 컴포넌트 (새로 생성)
- `components/notes/NoteList.tsx` - 노트 목록 (빈 상태 통합)
- `components/trash/TrashContent.tsx` - 휴지통 컨텐츠 (빈 상태 통합)
- `app/dashboard/page.tsx` - 대시보드 페이지
- `app/dashboard/trash/page.tsx` - 휴지통 페이지
- `lib/onboarding.ts` - 온보딩 상태 확인 유틸리티

### 기술 스택
- **프레임워크:** Next.js App Router
- **UI 라이브러리:** shadcn/ui, Tailwind CSS
- **아이콘:** Lucide React
- **애니메이션:** Tailwind CSS 애니메이션 유틸리티

### EmptyState 컴포넌트 Props 인터페이스
```typescript
interface EmptyStateProps {
  icon: LucideIcon;
  title: string;
  description: string;
  actionLabel?: string;
  actionHref?: string;
  onAction?: () => void;
  className?: string;
}
```

### 빈 상태 메시지 정의
1. **노트 목록 (온보딩 미완료)**
   - 제목: "AI 메모장에 오신 것을 환영합니다! 🎉"
   - 설명: "첫 번째 노트를 작성해보세요. 아이디어, 메모, 생각을 자유롭게 기록할 수 있습니다."
   - CTA: "첫 노트 작성하기"

2. **노트 목록 (온보딩 완료)**
   - 제목: "아직 노트가 없습니다"
   - 설명: "첫 번째 노트를 작성해보세요. 아이디어, 메모, 생각을 자유롭게 기록할 수 있습니다."
   - CTA: "새 노트 작성"

3. **휴지통**
   - 제목: "휴지통이 비어있습니다"
   - 설명: "삭제된 노트가 없습니다"
   - CTA: 없음

4. **검색 결과**
   - 제목: "검색 결과가 없습니다"
   - 설명: "'{{검색어}}'에 대한 노트를 찾을 수 없습니다. 다른 키워드로 검색해보세요."
   - CTA: "전체 노트 보기"

### 스타일링 가이드라인
```css
/* 컨테이너 */
.flex flex-col items-center justify-center py-16 px-4 text-center

/* 아이콘 */
.w-24 h-24 text-muted-foreground mb-6 opacity-50

/* 제목 */
.text-2xl font-semibold mb-2

/* 설명 */
.text-muted-foreground max-w-md mb-8

/* 애니메이션 */
.animate-in fade-in duration-500
```

### 접근성 가이드라인
- 아이콘에 `aria-hidden="true"` 속성 추가 (장식용)
- 제목에 적절한 heading 레벨 사용 (h2 또는 h3)
- CTA 버튼에 명확한 라벨 제공
- 키보드 네비게이션 지원
- 스크린 리더 테스트 수행

### Previous Story Notes
- Story 2.3에서 NoteList 컴포넌트 이미 구현됨
- Story 2.6에서 TrashContent 컴포넌트 이미 구현됨
- 온보딩 기능은 Epic 1에서 이미 구현되어 있음
- `lib/onboarding.ts`에 `getOnboardingStatus()` 함수 존재

### 구현 팁
1. **컴포넌트 재사용성:**
   - EmptyState를 다양한 상황에서 재사용할 수 있도록 유연하게 설계
   - Props로 모든 커스터마이징 가능하도록 구현

2. **조건부 렌더링:**
   ```typescript
   {notes.length === 0 ? (
     <EmptyState {...emptyStateProps} />
   ) : (
     <NoteGrid notes={notes} />
   )}
   ```

3. **온보딩 상태 확인:**
   ```typescript
   const onboardingStatus = await getOnboardingStatus();
   const isOnboardingComplete = onboardingStatus.completed;
   ```

### Testing
- **Test file location**: `__tests__/`
- **Test standards**: Jest + Testing Library 사용
- **Testing frameworks**: 
  - Component tests: @testing-library/react
  - Accessibility tests: jest-axe
- **Specific testing requirements**:
  - 각 상황별 빈 상태 렌더링 검증
  - CTA 버튼 클릭 동작 테스트
  - 온보딩 완료 여부에 따른 메시지 분기 테스트
  - 반응형 레이아웃 테스트
  - 접근성 규칙 준수 테스트 (jest-axe)
  - 애니메이션 적용 여부 확인

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-14 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Debug Log References
None

### Completion Notes List
- EmptyState 컴포넌트를 재사용 가능한 형태로 재설계: Props를 통해 아이콘, 제목, 설명, 액션을 커스터마이징
- 접근성 향상: 아이콘에 aria-hidden 속성 추가, 제목을 h2로 구조화
- 애니메이션 적용: Tailwind의 animate-in, fade-in, duration-500 클래스 사용
- NoteList 컴포넌트 수정: checkOnboardingStatus로 온보딩 완료 여부 확인, 상태에 따라 다른 메시지 표시
- 온보딩 미완료 사용자에게는 환영 메시지, 완료 사용자에게는 간결한 메시지 제공
- TrashContent 컴포넌트 수정: EmptyState 컴포넌트 통합으로 일관된 UI 제공
- 검색 결과 빈 상태는 Epic 5 (검색 필터링)에서 구현 예정
- EmptyState 컴포넌트 테스트: 접근성, 렌더링, props 전달 등 포괄적 테스트 작성

### File List
- **Modified**: components/notes/EmptyState.tsx - 재사용 가능한 빈 상태 공통 컴포넌트로 개선
- **Modified**: components/notes/NoteList.tsx - 온보딩 상태 확인 및 빈 상태 메시지 분기 구현
- **Modified**: components/trash/TrashContent.tsx - EmptyState 컴포넌트 통합
- **Created**: __tests__/EmptyState.test.tsx - EmptyState 컴포넌트 테스트

## QA Results
*Results from QA Agent review will be added here*

