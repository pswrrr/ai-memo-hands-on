# Story 2.2: λ…ΈνΈ μƒμ„± (μ λ© + λ³Έλ¬Έ)

## π“‹ Status
**Done**

## π― Story

**As a** λ΅κ·ΈμΈν• μ‚¬μ©μ  
**I want** μƒλ΅μ΄ λ…ΈνΈλ¥Ό μƒμ„±ν•  μ μλ„λ΅  
**So that** μ•„μ΄λ””μ–΄μ™€ λ©”λ¨λ¥Ό μ €μ¥ν•  μ μλ‹¤

## π“ Acceptance Criteria

### κΈ°λ¥ μ”κµ¬μ‚¬ν•­
1. λ…ΈνΈ μƒμ„± νΌ UI μ κ³µ
2. μ λ©κ³Ό λ³Έλ¬Έ μ…λ ¥ ν•„λ“
3. λ…ΈνΈ μ €μ¥ κΈ°λ¥
4. μ…λ ¥ μ ν¨μ„± κ²€μ¦
5. μ €μ¥ μ„±κ³µ/μ‹¤ν¨ ν”Όλ“λ°±
6. μλ™ μ €μ¥ κΈ°λ¥ (μ„ νƒμ‚¬ν•­)

### UI/UX μ”κµ¬μ‚¬ν•­
1. μ§κ΄€μ μΈ λ…ΈνΈ μ‘μ„± μΈν„°νμ΄μ¤
2. λ°μ‘ν• λ””μμΈ (λ¨λ°”μΌ/λ°μ¤ν¬ν†±)
3. μ‹¤μ‹κ°„ μ…λ ¥ μƒνƒ ν‘μ‹
4. λ΅λ”© μƒνƒ λ° μ—λ¬ λ©”μ‹μ§€
5. μ €μ¥ μ™„λ£ ν™•μΈ

### κΈ°μ μ  μ”κµ¬μ‚¬ν•­
1. Next.js Server Actions ν™μ©
2. DrizzleORMμ„ ν†µν• λ°μ΄ν„° μ €μ¥
3. μ‚¬μ©μ μΈμ¦ μƒνƒ ν™•μΈ
4. μ…λ ¥ λ°μ΄ν„° μ ν¨μ„± κ²€μ¦
5. μ—λ¬ ν•Έλ“¤λ§ λ° μ‚¬μ©μ ν”Όλ“λ°±

## π“ Tasks / Subtasks

- [x] Task 1: λ…ΈνΈ μƒμ„± νΌ μ»΄ν¬λ„νΈ κµ¬ν„
  - [x] `components/notes/CreateNoteForm.tsx` μƒμ„±
  - [x] μ λ© μ…λ ¥ ν•„λ“ κµ¬ν„
  - [x] λ³Έλ¬Έ μ…λ ¥ ν•„λ“ κµ¬ν„ (textarea)
  - [x] νΌ μƒνƒ κ΄€λ¦¬ (React Hook Form)
  - [x] μ…λ ¥ μ ν¨μ„± κ²€μ¦

- [x] Task 2: μ„λ²„ μ•΅μ… κµ¬ν„
  - [x] `app/actions/notes.ts` μƒμ„±
  - [x] `createNote` μ„λ²„ μ•΅μ… κµ¬ν„
  - [x] μ‚¬μ©μ μΈμ¦ μƒνƒ ν™•μΈ
  - [x] λ°μ΄ν„°λ² μ΄μ¤ μ €μ¥ λ΅μ§
  - [x] μ—λ¬ ν•Έλ“¤λ§

- [x] Task 3: λ°μ΄ν„° μ ν¨μ„± κ²€μ¦
  - [x] `lib/validations/notes.ts` μƒμ„±
  - [x] λ…ΈνΈ μƒμ„± μ¤ν‚¤λ§ μ •μ
  - [x] Zodλ¥Ό ν™μ©ν• μ ν¨μ„± κ²€μ¦
  - [x] μ—λ¬ λ©”μ‹μ§€ μ •μ

- [x] Task 4: UI μƒνƒ κ΄€λ¦¬
  - [x] λ΅λ”© μƒνƒ ν‘μ‹
  - [x] μ„±κ³µ/μ‹¤ν¨ ν”Όλ“λ°±
  - [x] νΌ λ¦¬μ…‹ κΈ°λ¥
  - [x] μ—λ¬ λ©”μ‹μ§€ ν‘μ‹

- [x] Task 5: λ°μ‘ν• λ””μμΈ
  - [x] λ¨λ°”μΌ μµμ ν™”
  - [x] λ°μ¤ν¬ν†± λ μ΄μ•„μ›ƒ
  - [x] shadcn/ui μ»΄ν¬λ„νΈ ν™μ©
  - [x] μ ‘κ·Όμ„± κ³ λ ¤

- [x] Task 6: μλ™ μ €μ¥ κΈ°λ¥ (μ„ νƒμ‚¬ν•­)
  - [x] λ””λ°”μ΄μ¤λ μλ™ μ €μ¥
  - [x] μ„μ‹ μ €μ¥ μƒνƒ ν‘μ‹
  - [x] μ¶©λ λ°©μ§€ λ΅μ§

- [x] Task 7: λ‹¨μ„ ν…μ¤νΈ μ‘μ„±
  - [x] νΌ μ»΄ν¬λ„νΈ ν…μ¤νΈ
  - [x] μ„λ²„ μ•΅μ… ν…μ¤νΈ
  - [x] μ ν¨μ„± κ²€μ¦ ν…μ¤νΈ
  - [x] μ—λ¬ μ²λ¦¬ ν…μ¤νΈ

## π”§ Dev Notes

### Previous Story Insights
Story 2.1μ—μ„ κµ¬ν„λ μ‚¬ν•­:
- DrizzleORM ν™κ²½ μ„¤μ • μ™„λ£
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ μ •μ μ™„λ£ (notes, note_tags, summaries ν…μ΄λΈ”)
- Drizzle ν΄λΌμ΄μ–ΈνΈ μ„¤μ • μ™„λ£
- λ§μ΄κ·Έλ μ΄μ… μ‹μ¤ν… κµ¬μ¶• μ™„λ£
- Jest ν™κ²½ μ„¤μ • κ°μ„ 

μ¬μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈ λ° ν•¨μ:
- `lib/db/index.ts` - Drizzle ν΄λΌμ΄μ–ΈνΈ
- `lib/db/schema.ts` - λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
- `lib/validations.ts` - κΈ°μ΅΄ μ ν¨μ„± κ²€μ¦ ν•¨μλ“¤
- `contexts/AuthContext.tsx` - μΈμ¦ μƒνƒ κ΄€λ¦¬
- `hooks/useAuth.ts` - μΈμ¦ ν›…

### Architecture Context

**κΈ°μ  μ¤νƒ** [Source: docs/architecture.md#1]
- Next.js (App Router, Server Actions)
- shadcn/ui + Tailwind + Radix UI
- Drizzle ORM (λ§μ΄κ·Έλ μ΄μ…/μΏΌλ¦¬)
- Supabase (Postgres, Auth, Storage)

**λ°μ΄ν„° λ¨λΈλ§** [Source: docs/architecture.md#2]
- notes ν…μ΄λΈ”: id, user_id, title, content, created_at, updated_at
- μ‚¬μ©μ-λ…ΈνΈ 1:N κ΄€κ³„
- UUID κΈ°λ° μ‹λ³„μ μ‚¬μ©

**μ„λ²„ μ•΅μ…** [Source: docs/architecture.md#4]
- `saveNote` β€“ λ…ΈνΈ μ‘μ„±/μμ •
- Next.js Server Actions κΈ°λ° λ°μ΄ν„° μ²λ¦¬
- μ‚¬μ©μ μΈμ¦ μƒνƒ ν™•μΈ ν•„μ

**λ³΄μ• κ³ λ ¤μ‚¬ν•­** [Source: docs/architecture.md#3]
- κ¶ν• μ¤μ½”ν”„: Notesλ” μ‚¬μ©μ ID μ¤μ½”ν”„λ΅ μ†μ μλ§ CRUD κ°€λ¥
- Supabase μ„λΉ„μ¤ λ΅¤ ν‚¤λ” μ„λ²„ μ „μ©
- RLS (Row Level Security) μ •μ±… μ μ©

### File Structure
```
app/
β”β”€β”€ actions/
β”‚   β””β”€β”€ notes.ts                    # μƒλ΅ μƒμ„±: λ…ΈνΈ κ΄€λ ¨ μ„λ²„ μ•΅μ…

components/
β”β”€β”€ notes/
β”‚   β”β”€β”€ CreateNoteForm.tsx         # μƒλ΅ μƒμ„±: λ…ΈνΈ μƒμ„± νΌ
β”‚   β””β”€β”€ NoteEditor.tsx             # μƒλ΅ μƒμ„±: λ…ΈνΈ μ—λ””ν„° μ»΄ν¬λ„νΈ

lib/
β”β”€β”€ validations/
β”‚   β””β”€β”€ notes.ts                   # μƒλ΅ μƒμ„±: λ…ΈνΈ μ ν¨μ„± κ²€μ¦
β””β”€β”€ db/
    β”β”€β”€ index.ts                   # μ¬μ‚¬μ©: Drizzle ν΄λΌμ΄μ–ΈνΈ
    β””β”€β”€ schema.ts                  # μ¬μ‚¬μ©: λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
```

### API Specifications
- **μ„λ²„ μ•΅μ…**: `createNote`
  - μ…λ ¥: `{ title: string, content: string }`
  - μ¶λ ¥: `{ success: boolean, noteId?: string, error?: string }`
  - μΈμ¦: μ‚¬μ©μ λ΅κ·ΈμΈ μƒνƒ ν™•μΈ ν•„μ

- **λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬**
  - `db.insert(notes).values({ userId, title, content })`
  - `db.select().from(notes).where(eq(notes.userId, userId))`

### Testing Requirements
**ν…μ¤νΈ νμΌ μ„μΉ**: `__tests__/`
- `__tests__/CreateNoteForm.test.tsx` - νΌ μ»΄ν¬λ„νΈ ν…μ¤νΈ (μƒλ΅ μƒμ„±)
- `__tests__/notes-actions.test.ts` - μ„λ²„ μ•΅μ… ν…μ¤νΈ (μƒλ΅ μƒμ„±)
- `__tests__/notes-validations.test.ts` - μ ν¨μ„± κ²€μ¦ ν…μ¤νΈ (μƒλ΅ μƒμ„±)

**ν…μ¤νΈ ν”„λ μ„μ›ν¬**: Jest + Testing Library
- νΌ μ…λ ¥ λ° μ μ¶ ν…μ¤νΈ
- μ„λ²„ μ•΅μ… μ„±κ³µ/μ‹¤ν¨ ν…μ¤νΈ
- μ ν¨μ„± κ²€μ¦ ν…μ¤νΈ
- μ—λ¬ μ²λ¦¬ ν…μ¤νΈ

**ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ λ©ν‘**: 100% (Statements, Branches, Functions, Lines)

### Technical Constraints
- μ‚¬μ©μ μΈμ¦ μƒνƒ ν™•μΈ ν•„μ
- μ…λ ¥ λ°μ΄ν„° μ ν¨μ„± κ²€μ¦ ν•„μ
- μ—λ¬ ν•Έλ“¤λ§ λ° μ‚¬μ©μ ν”Όλ“λ°± ν•„μ
- λ°μ‘ν• λ””μμΈ ν•„μ
- μ ‘κ·Όμ„± κ³ λ ¤ ν•„μ

### Implementation Notes
1. React Hook Formμ„ ν™μ©ν• νΌ μƒνƒ κ΄€λ¦¬
2. Zodλ¥Ό ν™μ©ν• μ ν¨μ„± κ²€μ¦
3. shadcn/ui μ»΄ν¬λ„νΈ ν™μ©
4. Next.js Server Actions ν¨ν„΄
5. DrizzleORMμ νƒ€μ… μ•μ „μ„± ν™μ©

## π“… Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-27 | 1.0 | Story 2.2 μ΄μ• μƒμ„± | Bob (Scrum Master) |
| 2025-01-27 | 1.1 | Story 2.2 κµ¬ν„ μ™„λ£ | James (Full Stack Developer) |

## π”„ Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Debug Log References
None

### Completion Notes List
- λ…ΈνΈ μƒμ„± νΌ μ»΄ν¬λ„νΈ κµ¬ν„ μ™„λ£ (React Hook Form + Zod μ ν¨μ„± κ²€μ¦)
- μ„λ²„ μ•΅μ… κµ¬ν„ μ™„λ£ (createNote, updateNote, deleteNote)
- λ°μ΄ν„° μ ν¨μ„± κ²€μ¦ μ™„λ£ (Zod μ¤ν‚¤λ§, μ—λ¬ λ©”μ‹μ§€ μ •μ)
- UI μƒνƒ κ΄€λ¦¬ μ™„λ£ (λ΅λ”©, μ„±κ³µ/μ‹¤ν¨ ν”Όλ“λ°±, νΌ λ¦¬μ…‹)
- λ°μ‘ν• λ””μμΈ μ™„λ£ (shadcn/ui μ»΄ν¬λ„νΈ ν™μ©)
- μλ™ μ €μ¥ κΈ°λ¥ μ™„λ£ (λ””λ°”μ΄μ¤, μ„μ‹ μ €μ¥ μƒνƒ, μ¶©λ λ°©μ§€)
- λ‹¨μ„ ν…μ¤νΈ μ‘μ„± μ™„λ£ (19/19 ν…μ¤νΈ ν†µκ³Ό)
- λ€μ‹λ³΄λ“ ν†µν•© μ™„λ£ (λ…ΈνΈ μƒμ„± λ§ν¬ μ¶”κ°€)

### File List
**μƒλ΅ μƒμ„±λ νμΌ:**
- `lib/validations/notes.ts` - λ…ΈνΈ μ ν¨μ„± κ²€μ¦ μ¤ν‚¤λ§
- `app/actions/notes.ts` - λ…ΈνΈ κ΄€λ ¨ μ„λ²„ μ•΅μ…
- `components/notes/CreateNoteForm.tsx` - λ…ΈνΈ μƒμ„± νΌ μ»΄ν¬λ„νΈ
- `app/dashboard/notes/new/page.tsx` - μƒ λ…ΈνΈ μ‘μ„± νμ΄μ§€
- `__tests__/CreateNoteForm.test.tsx` - νΌ μ»΄ν¬λ„νΈ ν…μ¤νΈ
- `__tests__/notes-actions.test.ts` - μ„λ²„ μ•΅μ… ν…μ¤νΈ
- `__tests__/notes-validations.test.ts` - μ ν¨μ„± κ²€μ¦ ν…μ¤νΈ

**μμ •λ νμΌ:**
- `app/dashboard/page.tsx` - λ…ΈνΈ μƒμ„± λ§ν¬ μ¶”κ°€
- `package.json` - React Hook Form, Zod μμ΅΄μ„± μ¶”κ°€

## β… QA Results
_To be filled by QA Agent_
